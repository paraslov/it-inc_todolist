(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{104:function(t,e,a){},105:function(t,e,a){},135:function(t,e,a){"use strict";a.r(e);var r={};a.r(r),a.d(r,"selectIsAuth",(function(){return F}));var s={};a.r(s),a.d(s,"selectAppStatus",(function(){return _t})),a.d(s,"selectAppError",(function(){return Mt})),a.d(s,"selectIsAppInitialized",(function(){return Wt}));var n=a(0),o=a.n(n),i=a(11),c=a.n(i);a(104),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(105);var d,u=a(180),l=a(181),p=a(182),f=a(175),b=a(137),j=a(176),h=a(184),O=a(185),v=a(183),x=a(10),k=a(8),m=a.n(k),L=a(17),g=a(79),I=a.n(g).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"api-key":"518b0738-7ca3-4f1f-b3b6-a549590182a8"}});!function(t){t[t.Success=0]="Success",t[t.Error=1]="Error"}(d||(d={}));var y=function(){return I.get("todo-lists").then((function(t){return t.data}))},w=function(t){return I.post("todo-lists",{title:t}).then((function(t){return t.data}))},C=function(t){return I.delete("todo-lists/".concat(t)).then((function(t){return t.data}))},S=function(t,e){return I.put("todo-lists/".concat(t),{title:e}).then((function(t){return t.data}))},T=a(15),A={setAppError:Object(T.b)("app/setAppError"),setAppStatus:Object(T.b)("app/setAppStatus")},E=A.setAppStatus,R=A.setAppError,N=function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return a&&e.dispatch(R({error:t.messages.length?t.messages[0]:"some error occurred"})),e.dispatch(E({status:"failed"})),e.rejectWithValue({errors:t.messages,fieldsErrors:t.fieldsErrors})},z=function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return a&&e.dispatch(R({error:t.message?t.message:"some error occurred"})),e.dispatch(E({status:"failed"})),e.rejectWithValue({errors:[t.message],fieldsErrors:void 0})},F=function(t){return t.auth.isAuth},P=a(168),D=a(191),_=a(172),M=a(173),W=a(186),B=a(174),U=a(188),q=a(87),H=a(21),V=a(16),J=a(24),G=function(){return Object(H.b)()};function K(t){var e=Object(H.b)();return Object(n.useMemo)((function(){return Object(J.b)(t,e)}),[])}var X,$,Q=a(3),Y=function(){console.log("LOGIN rendered");var t=G(),e=Object(H.c)(F),a=Object(q.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?(t.email.length>20||t.email.length<7)&&(e.email="Must be 6-20 characters"):e.email="Required",t.password?(t.password.length>20||t.password.length<7)&&(e.password="Must be 6-20 characters"):e.password="Required",e},onSubmit:function(){var e=Object(L.a)(m.a.mark((function e(a,r){var s,n,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(dt.login({data:a}));case 2:s=e.sent,dt.login.rejected.match(s)&&(null===(n=s.payload)||void 0===n||null===(o=n.fieldsErrors)||void 0===o?void 0:o.length)&&(i=s.payload.fieldsErrors[0],r.setFieldError(i.field,i.error));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()});return e?Object(Q.jsx)(V.a,{to:"/"}):Object(Q.jsx)(P.a,{container:!0,justify:"center",children:Object(Q.jsx)(P.a,{item:!0,xs:4,children:Object(Q.jsx)("form",{onSubmit:a.handleSubmit,children:Object(Q.jsxs)(D.a,{children:[Object(Q.jsxs)(_.a,{children:[Object(Q.jsxs)("p",{children:["To log in get registered",Object(Q.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:" here"})]}),Object(Q.jsx)("p",{children:"or use common test account credentials:"}),Object(Q.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(Q.jsx)("p",{children:"Password: free"})]}),Object(Q.jsxs)(M.a,{children:[Object(Q.jsx)(W.a,Object(x.a)({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.errors.email&&a.touched.email?Object(Q.jsx)("div",{style:{color:"red"},children:a.errors.email}):null,Object(Q.jsx)(W.a,Object(x.a)({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.errors.password&&a.touched.password?Object(Q.jsx)("div",{style:{color:"red"},children:a.errors.password}):null,Object(Q.jsx)(B.a,{label:"Remember me",control:Object(Q.jsx)(U.a,Object(x.a)({},a.getFieldProps("rememberMe")))}),Object(Q.jsx)(j.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})},Z=function(t){return I.post("auth/login",t).then((function(t){return t.data}))},tt=function(){return I.delete("auth/login").then((function(t){return t.data}))},et=function(){return I.get("auth/me").then((function(t){return t.data}))},at=A.setAppStatus,rt=Object(T.c)("auth/login",function(){var t=Object(L.a)(m.a.mark((function t(e,a){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.dispatch(at({status:"loading"})),t.next=4,Z(e.data);case 4:if((r=t.sent).resultCode!==d.Success){t.next=10;break}return a.dispatch(at({status:"succeeded"})),t.abrupt("return");case 10:return t.abrupt("return",N(r,a));case 11:t.next=16;break;case 13:return t.prev=13,t.t0=t.catch(0),t.abrupt("return",z(t.t0,a));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()),st=Object(T.c)("auth/logout",function(){var t=Object(L.a)(m.a.mark((function t(e,a){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.dispatch(at({status:"loading"})),t.next=4,tt();case 4:if((r=t.sent).resultCode!==d.Success){t.next=10;break}return a.dispatch(at({status:"succeeded"})),t.abrupt("return");case 10:return t.abrupt("return",N(r,a));case 11:t.next=16;break;case 13:return t.prev=13,t.t0=t.catch(0),t.abrupt("return",z(t.t0,a));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()),nt={login:rt,logout:st},ot=Object(T.d)({name:"auth",initialState:{isAuth:!1},reducers:{setIsAuth:function(t,e){t.isAuth=e.payload.isAuth}},extraReducers:function(t){t.addCase(rt.fulfilled,(function(t){t.isAuth=!0})),t.addCase(st.fulfilled,(function(t){t.isAuth=!1}))}}),it=ot.reducer,ct=ot.actions.setIsAuth,dt=Object(x.a)(Object(x.a)({},nt),ot.actions),ut=A.setAppStatus,lt=Object(T.c)("todoListReducer/fetchTodoLists",function(){var t=Object(L.a)(m.a.mark((function t(e,a){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.dispatch(ut({status:"loading"})),t.next=4,y();case 4:return r=t.sent,a.dispatch(ut({status:"succeeded"})),t.abrupt("return",{todoLists:r});case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",z(t.t0,a));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}()),pt=Object(T.c)("todoListReducer/addTodoList",function(){var t=Object(L.a)(m.a.mark((function t(e,a){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.dispatch(ut({status:"loading"})),t.next=4,w(e.title);case 4:if(0!==(r=t.sent).resultCode){t.next=10;break}return a.dispatch(ut({status:"succeeded"})),t.abrupt("return",{todoList:r.data.item});case 10:return t.abrupt("return",N(r,a,!1));case 11:t.next=16;break;case 13:return t.prev=13,t.t0=t.catch(0),t.abrupt("return",z(t.t0,a,!1));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()),ft=Object(T.c)("todoListReducer/removeTodoList",function(){var t=Object(L.a)(m.a.mark((function t(e,a){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.dispatch(ut({status:"loading"})),a.dispatch(vt({todoListId:e.todoListId,todoListStatus:"loading"})),t.next=5,C(e.todoListId);case 5:if(0!==(r=t.sent).resultCode){t.next=11;break}return a.dispatch(ut({status:"succeeded"})),t.abrupt("return",{todoListId:e.todoListId});case 11:return t.abrupt("return",N(r,a));case 12:t.next=18;break;case 14:return t.prev=14,t.t0=t.catch(0),a.dispatch(vt({todoListId:e.todoListId,todoListStatus:"failed"})),t.abrupt("return",z(t.t0,a));case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,a){return t.apply(this,arguments)}}()),bt=Object(T.c)("todoListReducer/changeTodoListTitle",function(){var t=Object(L.a)(m.a.mark((function t(e,a){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.dispatch(ut({status:"loading"})),a.dispatch(vt({todoListId:e.todoListId,todoListStatus:"loading"})),t.next=5,S(e.todoListId,e.title);case 5:if(0!==(r=t.sent).resultCode){t.next=12;break}return a.dispatch(ut({status:"succeeded"})),a.dispatch(vt({todoListId:e.todoListId,todoListStatus:"succeeded"})),t.abrupt("return",e);case 12:return t.abrupt("return",N(r,a));case 13:t.next=18;break;case 15:return t.prev=15,t.t0=t.catch(0),t.abrupt("return",z(t.t0,a));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,a){return t.apply(this,arguments)}}()),jt={fetchTodoLists:lt,addTodoList:pt,removeTodoList:ft,changeTodoListTitle:bt},ht=Object(T.d)({name:"todoListReducer",initialState:[],reducers:{_changeTodoListFilter:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todoListId}));t[a].filter=e.payload.filter},_setTodoListStatus:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todoListId}));t[a].todoListStatus=e.payload.todoListStatus}},extraReducers:function(t){t.addCase(lt.fulfilled,(function(t,e){return e.payload.todoLists.map((function(t){return Object(x.a)(Object(x.a)({},t),{},{filter:"all",todoListStatus:"idle"})}))})).addCase(pt.fulfilled,(function(t,e){t.unshift(Object(x.a)(Object(x.a)({},e.payload.todoList),{},{filter:"all",todoListStatus:"idle"}))})).addCase(ft.fulfilled,(function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todoListId}));a>-1&&t.splice(a,1)})).addCase(bt.fulfilled,(function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todoListId}));t[a].title=e.payload.title})).addCase(dt.logout.fulfilled,(function(t){t.splice(0)}))}}),Ot=ht.actions,vt=(Ot._changeTodoListFilter,Ot._setTodoListStatus);!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(X||(X={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}($||($={}));var xt=function(t){return I.get("todo-lists/".concat(t,"/tasks")).then((function(t){return t.data}))},kt=function(t,e){return I.post("todo-lists/".concat(t,"/tasks"),{title:e}).then((function(t){return t.data}))},mt=function(t,e){return I.delete("todo-lists/".concat(t,"/tasks/").concat(e)).then((function(t){return t.data}))},Lt=function(t,e,a){return I.put("todo-lists/".concat(t,"/tasks/").concat(e),a).then((function(t){return t.data}))},gt=A.setAppStatus,It=Object(T.c)("tasksReducer/fetchTasks",function(){var t=Object(L.a)(m.a.mark((function t(e,a){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.dispatch(gt({status:"loading"})),t.next=4,xt(e.todoListId);case 4:return r=t.sent,a.dispatch(gt({status:"succeeded"})),t.abrupt("return",{todoListId:e.todoListId,tasks:r.items});case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",z(t.t0,a));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}()),yt=Object(T.c)("tasksReducer/addTask",function(){var t=Object(L.a)(m.a.mark((function t(e,a){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.dispatch(gt({status:"loading"})),t.next=4,kt(e.todoListId,e.title);case 4:if(0!==(r=t.sent).resultCode){t.next=10;break}return a.dispatch(gt({status:"succeeded"})),t.abrupt("return",{task:r.data.item});case 10:return t.abrupt("return",N(r,a,!1));case 11:t.next=16;break;case 13:return t.prev=13,t.t0=t.catch(0),t.abrupt("return",z(t.t0,a,!1));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()),wt=Object(T.c)("tasksReducer/removeTask",function(){var t=Object(L.a)(m.a.mark((function t(e,a){var r,s,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.todoListId,s=e.taskId,t.prev=1,a.dispatch(gt({status:"loading"})),a.dispatch(At({todoListId:r,taskId:s,taskStatus:"loading"})),t.next=6,mt(r,s);case 6:if(0!==(n=t.sent).resultCode){t.next=13;break}return a.dispatch(gt({status:"succeeded"})),a.dispatch(At({todoListId:r,taskId:s,taskStatus:"succeeded"})),t.abrupt("return",{todoListId:r,taskId:s});case 13:return a.dispatch(At({todoListId:r,taskId:s,taskStatus:"failed"})),t.abrupt("return",N(n,a));case 15:t.next=21;break;case 17:return t.prev=17,t.t0=t.catch(1),a.dispatch(At({todoListId:r,taskId:s,taskStatus:"failed"})),t.abrupt("return",z(t.t0,a));case 21:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e,a){return t.apply(this,arguments)}}()),Ct=Object(T.c)("tasksReducer/updateTask",function(){var t=Object(L.a)(m.a.mark((function t(e,a){var r,s,n,o,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.todoListId,s=e.task,n=e.model,t.prev=1,a.dispatch(gt({status:"loading"})),a.dispatch(At({todoListId:r,taskId:s.id,taskStatus:"loading"})),o=Object(x.a)({title:s.title,startDate:s.startDate,priority:s.priority,deadline:s.deadline,description:s.description,status:s.status},n),t.next=7,Lt(r,s.id,o);case 7:if(0!==(i=t.sent).resultCode){t.next=14;break}return a.dispatch(gt({status:"succeeded"})),a.dispatch(At({todoListId:r,taskId:s.id,taskStatus:"succeeded"})),t.abrupt("return",{todoListId:r,taskId:s.id,model:o});case 14:return a.dispatch(At({todoListId:r,taskId:s.id,taskStatus:"failed"})),t.abrupt("return",N(i,a));case 16:t.next=22;break;case 18:return t.prev=18,t.t0=t.catch(1),a.dispatch(At({todoListId:r,taskId:s.id,taskStatus:"failed"})),t.abrupt("return",z(t.t0,a));case 22:case"end":return t.stop()}}),t,null,[[1,18]])})));return function(e,a){return t.apply(this,arguments)}}()),St={fetchTasks:It,addTask:yt,removeTask:wt,updateTask:Ct},Tt=Object(T.d)({name:"tasksReducer",initialState:{},reducers:{_setTaskStatus:function(t,e){var a=t[e.payload.todoListId].findIndex((function(t){return t.id===e.payload.taskId}));t[e.payload.todoListId][a].taskStatus=e.payload.taskStatus}},extraReducers:function(t){t.addCase(jt.addTodoList.fulfilled,(function(t,e){t[e.payload.todoList.id]=[]})).addCase(jt.removeTodoList.fulfilled,(function(t,e){delete t[e.payload.todoListId]})).addCase(jt.fetchTodoLists.fulfilled,(function(t,e){var a;null===(a=e.payload)||void 0===a||a.todoLists.forEach((function(e){return t[e.id]=[]}))})).addCase(It.fulfilled,(function(t,e){e.payload&&(t[e.payload.todoListId]=e.payload.tasks.map((function(t){return Object(x.a)(Object(x.a)({},t),{},{taskStatus:"idle"})})))})).addCase(yt.fulfilled,(function(t,e){t[e.payload.task.todoListId].unshift(Object(x.a)(Object(x.a)({},e.payload.task),{},{taskStatus:"idle"}))})).addCase(wt.fulfilled,(function(t,e){var a=t[e.payload.todoListId].findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&t[e.payload.todoListId].splice(a,1)})).addCase(Ct.fulfilled,(function(t,e){var a=t[e.payload.todoListId].findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&(t[e.payload.todoListId][a]=Object(x.a)(Object(x.a)({},t[e.payload.todoListId][a]),e.payload.model))})).addCase(dt.logout.fulfilled,(function(t){Object.keys(t).map((function(e){return delete t[e]}))}))}}),At=Tt.actions._setTaskStatus,Et=a(47),Rt=a(177),Nt=o.a.memo((function(t){var e=t.label,a=t.addNewItem,r=t.disabled,s=void 0!==r&&r;console.log("AIF R");var o=Object(n.useState)(""),i=Object(Et.a)(o,2),c=i[0],d=i[1],u=Object(n.useState)(""),l=Object(Et.a)(u,2),p=l[0],b=l[1],j=Object(n.useCallback)((function(){""!==c.trim()?a(c.trim(),{setNewTaskTitle:d,setError:b}):b("Title is required!")}),[c,a]),h=Object(n.useCallback)((function(t){return d(t.currentTarget.value)}),[]),O=Object(n.useCallback)((function(t){p&&b(""),"Enter"===t.key&&j()}),[p,j]);return Object(Q.jsxs)("div",{style:{position:"relative",width:"280px"},children:[Object(Q.jsx)(W.a,{style:{width:"230px"},disabled:s,value:c,label:e,variant:"outlined",error:!!p,helperText:p,onChange:h,onKeyPress:O}),Object(Q.jsx)(f.a,{onClick:j,style:{position:"absolute",top:"0",right:"-10px",marginLeft:"5px"},disabled:s,children:Object(Q.jsx)(Rt.a,{fontSize:"large"})})]})})),zt=o.a.memo((function(t){var e=t.onChange,a=t.title,r=t.disabled,s=void 0!==r&&r;console.log("ES R");var o=Object(n.useState)(!1),i=Object(Et.a)(o,2),c=i[0],d=i[1],u=Object(n.useState)(""),l=Object(Et.a)(u,2),p=l[0],f=l[1],b=Object(n.useCallback)((function(t){f(t.currentTarget.value)}),[]),j=Object(n.useCallback)((function(){s||(f(a),d(!0))}),[a,s]),h=Object(n.useCallback)((function(){e(p),d(!1)}),[e,p]);return Object(Q.jsx)(Q.Fragment,{children:c?Object(Q.jsx)(W.a,{value:p,onBlur:h,onChange:b,autoFocus:!0}):Object(Q.jsx)("span",{onDoubleClick:j,style:{opacity:s?"0.5":void 0,wordBreak:"break-word"},children:a})})})),Ft=a(190),Pt=a(187),Dt=a(178),_t=function(t){return t.app.status},Mt=function(t){return t.app.error},Wt=function(t){return t.app.isAppInitialized},Bt=A.setAppStatus,Ut=Object(T.c)("app/initializeApp",function(){var t=Object(L.a)(m.a.mark((function t(e,a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.dispatch(Bt({status:"loading"})),t.next=4,et();case 4:if(t.sent.resultCode!==d.Success){t.next=11;break}return a.dispatch(ct({isAuth:!0})),a.dispatch(Bt({status:"succeeded"})),t.abrupt("return",{isAppInitialized:!0});case 11:return a.dispatch(Bt({status:"failed"})),t.abrupt("return",{isAppInitialized:!0});case 13:t.next=18;break;case 15:return t.prev=15,t.t0=t.catch(0),t.abrupt("return",z(t.t0,a));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,a){return t.apply(this,arguments)}}()),qt={initializeApp:Ut},Ht=Object(T.d)({name:"app",initialState:{error:null,status:"idle",isAppInitialized:!1},reducers:{},extraReducers:function(t){t.addCase(Ut.fulfilled,(function(t,e){t.isAppInitialized=e.payload.isAppInitialized})).addCase(A.setAppError,(function(t,e){t.error=e.payload.error})).addCase(A.setAppStatus,(function(t,e){t.status=e.payload.status}))}}),Vt=Object(x.a)(Object(x.a)({},qt),Ht.actions),Jt=Ht.reducer;function Gt(t){return Object(Q.jsx)(Pt.a,Object(x.a)({elevation:6,variant:"filled"},t))}var Kt=Object(Dt.a)((function(t){return{root:{width:"100%","& > * + *":{marginTop:t.spacing(2)}}}}));function Xt(){var t=Kt(),e=Object(H.b)(),a=Object(H.c)(s.selectAppError),r=function(t,a){"clickaway"!==a&&e(A.setAppError({error:null}))};return Object(Q.jsx)("div",{className:t.root,children:Object(Q.jsx)(Ft.a,{open:null!==a,autoHideDuration:6e3,onClose:r,children:Object(Q.jsx)(Gt,{onClose:r,severity:"error",children:a})})})}var $t=function(t){return t.tasks},Qt=function(t){return t.todoLists};function Yt(t){var e=t.demo,a=void 0!==e&&e;console.log("TodoLists R");var s=G(),o=Object(H.c)(r.selectIsAuth),i=K(se).fetchTodoLists,c=Object(H.c)(Qt),d=Object(H.c)($t),u=Object(n.useCallback)(function(){var t=Object(L.a)(m.a.mark((function t(e,a){var r,n,o,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(se.addTodoList({title:e}));case 2:r=t.sent,se.addTodoList.rejected.match(r)?(null===(n=r.payload)||void 0===n||null===(o=n.errors)||void 0===o?void 0:o.length)?(i=r.payload.errors[0],a.setError(i)):a.setError("Some error occurred"):a.setNewTaskTitle("");case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),[]);return Object(n.useEffect)((function(){!a&&o&&!c.length&&i()}),[]),o?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(P.a,{container:!0,style:{padding:"20px"},children:Object(Q.jsx)(Nt,{label:"Add TODO list",addNewItem:u})}),Object(Q.jsx)(P.a,{container:!0,spacing:2,style:{flexWrap:"nowrap",overflowX:"scroll"},children:c.map((function(t){return Object(Q.jsx)(P.a,{item:!0,children:Object(Q.jsx)("div",{style:{width:"300px"},children:Object(Q.jsx)(ae,{demo:a,todoList:t,tasks:d[t.id]})})},t.id)}))})]}):Object(Q.jsx)(V.a,{to:"/login"})}var Zt=a(88),te=a(136),ee=a(179),ae=o.a.memo((function(t){var e=t.demo,a=void 0!==e&&e,r=Object(Zt.a)(t,["demo"]);console.log("TL R");var s=K(ne).fetchTasks,o=K(se),i=o.removeTodoList,c=o._changeTodoListFilter,d=o.changeTodoListTitle,u=G();Object(n.useEffect)((function(){a||!r.tasks.length&&s({todoListId:r.todoList.id})}),[]);var l=Object(n.useCallback)(function(){var t=Object(L.a)(m.a.mark((function t(e,a){var s,n,o,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(ne.addTask({todoListId:r.todoList.id,title:e}));case 2:s=t.sent,ne.addTask.rejected.match(s)?(null===(n=s.payload)||void 0===n||null===(o=n.errors)||void 0===o?void 0:o.length)?(i=s.payload.errors[0],a.setError(i)):a.setError("Some error occurred"):a.setNewTaskTitle("");case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),[r.todoList.id]),p=Object(n.useCallback)((function(){return i({todoListId:r.todoList.id})}),[r.todoList.id]),b=Object(n.useCallback)((function(t){return d({title:t,todoListId:r.todoList.id})}),[r.todoList.id]),h=Object(n.useCallback)((function(t){return c({todoListId:r.todoList.id,filter:t})}),[r.todoList.id]),O=Object(n.useCallback)((function(t,e){return Object(Q.jsx)(j.a,{variant:r.todoList.filter===t?"contained":"outlined",color:r.todoList.filter===t?"primary":"default",style:{marginRight:"5px"},onClick:function(){return h(t)},children:e})}),[r.todoList.filter]),v=r.tasks;"completed"===r.todoList.filter&&(v=r.tasks.filter((function(t){return t.status===X.Completed}))),"active"===r.todoList.filter&&(v=r.tasks.filter((function(t){return t.status===X.New})));var x=v.map((function(t){return Object(Q.jsx)(re,{task:t,disabled:"loading"===t.taskStatus},t.id)}));return Object(Q.jsxs)(te.a,{style:{padding:"10px",position:"relative"},children:[Object(Q.jsx)(f.a,{onClick:p,style:{position:"absolute",top:"-5px",right:"-5px"},disabled:"loading"===r.todoList.todoListStatus,children:Object(Q.jsx)(ee.a,{fontSize:"small"})}),Object(Q.jsx)("h3",{style:{width:"260px"},children:Object(Q.jsx)(zt,{title:r.todoList.title,onChange:b})}),Object(Q.jsx)(Nt,{label:"Add task",addNewItem:l,disabled:"loading"===r.todoList.todoListStatus}),Object(Q.jsx)("div",{children:x.length?x:Object(Q.jsx)("div",{style:{padding:"10px",opacity:"0.5"},children:"No tasks"})}),Object(Q.jsxs)("div",{children:[O("all","All"),O("active","Active"),O("completed","Completed")]})]})})),re=o.a.memo((function(t){var e=K(ne),a=e.removeTask,r=e.updateTask,s=Object(n.useCallback)((function(){return a({todoListId:t.task.todoListId,taskId:t.task.id})}),[]),o=Object(n.useCallback)((function(){return r({todoListId:t.task.todoListId,task:t.task,model:{status:t.task.status===X.New?X.Completed:X.New}})}),[t.task.todoListId,t.task,t.task.status]),i=Object(n.useCallback)((function(e){r({todoListId:t.task.todoListId,task:t.task,model:{title:e}})}),[t.task.todoListId,t.task]);return Object(Q.jsxs)("div",{style:{opacity:t.task.status===X.Completed?.5:1,position:"relative"},children:[Object(Q.jsx)(U.a,{onChange:o,disabled:t.disabled,color:"primary",checked:t.task.status===X.Completed}),Object(Q.jsx)(zt,{title:t.task.title,onChange:i,disabled:t.disabled}),Object(Q.jsx)(f.a,{onClick:s,style:{position:"absolute",top:"0",right:"-17px"},disabled:t.disabled,children:Object(Q.jsx)(ee.a,{fontSize:"small"})})]},t.task.id)})),se=Object(x.a)(Object(x.a)({},jt),ht.actions),ne=Object(x.a)(Object(x.a)({},St),Tt.actions),oe=Tt.reducer,ie=ht.reducer;var ce=function(t){var e=t.demo,a=void 0!==e&&e;console.log("APP R");var r=Object(H.c)(_t),s=Object(H.c)(Wt),o=K(dt).logout,i=K(Vt).initializeApp;return Object(n.useEffect)((function(){s||i(),console.log("shoot")}),[]),s?Object(Q.jsxs)("div",{className:"App",children:[Object(Q.jsx)(l.a,{position:"static",style:{height:"50px"},children:Object(Q.jsxs)(p.a,{children:[Object(Q.jsx)(f.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(Q.jsx)(v.a,{})}),Object(Q.jsx)(b.a,{variant:"h6",children:"News"}),Object(Q.jsx)(j.a,{color:"inherit",onClick:function(){return o()},children:"Log out"})]})}),Object(Q.jsx)("div",{style:{height:"5px"},children:"loading"===r&&Object(Q.jsx)(h.a,{color:"secondary"})}),Object(Q.jsx)(O.a,{fixed:!0,children:Object(Q.jsxs)(V.d,{children:[Object(Q.jsx)(V.b,{exact:!0,path:"/",render:function(){return Object(Q.jsx)(Yt,{demo:a})}}),Object(Q.jsx)(V.b,{path:"/login",render:function(){return Object(Q.jsx)(Y,{})}}),Object(Q.jsx)(V.b,{path:"/404",render:function(){return Object(Q.jsx)("h1",{children:"404 NOT FOUND"})}}),Object(Q.jsx)(V.a,{from:"*",to:"/404"})]})}),Object(Q.jsx)(Xt,{})]}):Object(Q.jsx)("div",{style:{position:"fixed",top:"40%",left:"40%"},children:Object(Q.jsx)(u.a,{style:{width:"100px"}})})},de=a(50),ue=Object(J.c)({tasks:oe,todoLists:ie,app:Jt,auth:it}),le=Object(T.a)({reducer:ue,middleware:function(t){return t().prepend(de.a)}});var pe=a(49);c.a.render(Object(Q.jsx)(H.a,{store:le,children:Object(Q.jsx)(pe.a,{children:Object(Q.jsx)(ce,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[135,1,2]]]);
//# sourceMappingURL=main.8338a26a.chunk.js.map